!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.0/mapbox-gl.css' rel='stylesheet' />
    <style>
      body {
        margin: 0;
        padding: 0;
      }

      #map {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 100%;
      }
      .marker {
  background-image: url('mapbox-icon.png');
  background-size: cover;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  cursor: pointer;
}
.mapboxgl-popup {
  max-width: 200px;
}

.mapboxgl-popup-content {
  text-align: center;
  font-family: 'Open Sans', sans-serif;
}
    </style>
</head>
<body>

<div id='map'></div>

<script>

mapboxgl.accessToken = 'pk.eyJ1IjoiYmFja3RvYmFzaWNzIiwiYSI6ImNqY3htNG0yMTFtYmwyeG51cmNqbDVoZmYifQ.uNGw43DBUxkduV7O1_K2bw';

var map = new mapboxgl.Map({
  container: 'map',
  style: 'mapbox://styles/mapbox/light-v9',
  center: [36.8219, 1.2921],
  zoom: 1
});


// code from the next step will go here!
var geojson = {
  type: "FeatureCollection",
  features: [
 {
   type: "Feature",
   geometry: {
      type: "Point",
      coordinates:  [ 37.906193,-0.023559 ]
         },
   properties: {
    title: 'Nairobi, Kenya',
      description: 'Went to school at the University of Nairobi, I live in the outskirts of this great, dynamic and sometimes crazy city',
      year: '2011-Current'
      
   }
 },
 {
   type: "Feature",
   geometry: {
      type: "Point",
      coordinates:  [ 34.888822,-6.369028 ]
   },
   properties: {
    title: 'Dar es Salaam, Tanzania',
      description: 'Went for a one week Conference where i had a chance to visit Tanzania\'s countryside and the famous Rufiji River',
            year: '2014'
   }
 },
 {
   type: "Feature",
   geometry: {
      type: "Point",
      coordinates:  [ -1.023194,7.946527 ]
   },
   properties: {
    title: 'Accra, Ghana',
      description: 'Stayed at the University of Ghana, Legon where i attended a Tropical Biology Conference',
            year: '2015'
   }
 },
 {
   type: "Feature",
   geometry: {
      type: "Point",
      coordinates:  [ 32.290275,1.373333 ]
   },
   properties: {
    title: 'Kibale, Uganda',
      description: 'Stayed at the Kibale Research Station in Kibale when i was a young biologist',
            year: '2012'
   }
 },
 {
   type: "Feature",
   geometry: {
      type: "Point",
      coordinates:  [ -95.712891,37.09024 ]
   },
   properties: {
    title: 'United States of America',
      description: 'Went to school at the University of Wyoming, have been to other states namely: Illinois, Denver, and New York',
            year: '2012,2017'
   }
 },
 {
   type: "Feature",
   geometry: {
      type: "Point",
      coordinates:  [ -102.552784,23.634501 ]
   },
   properties: {
    title: 'Mexico',
      description: 'Been to Mexico City and Merida in Yucatan',
            year: '2015'
   }
 },
 {
   type: "Feature",
   geometry: {
      type: "Point",
      coordinates:  [ -3.435973,55.378051 ]
   },
   properties: {
    title: 'United Kingdom',
      description: 'Been to London',
            year: '2012'
   }
 },
 {
   type: "Feature",
   geometry: {
      type: "Point",
      coordinates:  [ 2.213749,46.227638 ]
   },
   properties: {
    title: 'France',
      description: 'Been to Paris during the historic climate change accord',
            year: '2015'
   }
 },
 {
   type: "Feature",
   geometry: {
      type: "Point",
      coordinates:  [ 4.469936,50.503887 ]
   },
   properties: {
    title: 'Belgium',
      description: 'Been to Brussels',
            year: '2017'
   }
 },
 {
   type: "Feature",
   geometry: {
      type: "Point",
      coordinates:  [ 8.227512,46.818188 ]
   },
   properties: {
    title: 'Switzerland',
      description: 'Been to Geneva and Gland - to the IUCN headquarters',
            year: '2015'
   }
 },
 {
   type: "Feature",
   geometry: {
      type: "Point",
      coordinates:  [ 10.018343,51.133481 ]
   },
   properties: {
    title: 'Germany',
      description: 'Been to Frankfurt and Bonn on several occasions because of the UNFCCC process',
            year: '2017'
   }
 },
 {
   type: "Feature",
   geometry: {
      type: "Point",
      coordinates:  [ 101.901875,35.486703 ]
   },
   properties: {
    title: 'China',
      description: 'Lived in Beijing and Wuhan as temporary resident while i was a Presidential Fellow at the prestigious Chinese Academy of Sciences',
            year: '2015-2016'
   }
 },
 {
   type: "Feature",
   geometry: {
      type: "Point",
      coordinates:  [ 78.9629,20.5937 ]
   },
   properties: {
    title: 'India',
      description: 'Been to Mumbai(formerly Bombay) and Bangalore',
            year: '2014'
   }
 },
 {
   type: "Feature",
   geometry: {
      type: "Point",
      coordinates:  [ 101.992306,3.950791 ]
   },
   properties: {
    title: 'Malaysia',
      description: 'Been to the not so great capital Kuala Lumpur',
            year: '2015'
   }
 },
 {
   type: "Feature",
   geometry: {
      type: "Point",
      coordinates:  [ 54.256172,23.85206 ]
   },
   properties: {
    title: 'United Arab Emirates',
      description: 'Been to the concrete city in the desert Dubai and the Formula 1 darling city Abu Dhabi',
            year: '2017'
   }
 },
 {
   type: "Feature",
   geometry: {
      type: "Point",
      coordinates:  [ 51.1839,25.3548 ]
   },
   properties: {
    title: 'Qatar',
      description: 'Been to Doha, the country with the best airport in the world',
            year: '2015,2016,2017'
   }
 },
 {
   type: "Feature",
   geometry: {
      type: "Point",
      coordinates:  [ -6.017073,32.350751 ]
   },
   properties: {
    title: 'Morocco',
      description: 'Been to Casablanca and Marrakech',
            year: '2016'
   }
 },
  {
   type: "Feature",
   geometry: {
      type: "Point",
      coordinates:  [ 23.913711,-28.378272 ]
   },
   properties: {
    title: 'South Africa',
      description: 'Been to the Johannesburg, and lived in Thabazimbi 10km north of Rooiberg in Limpopo',
            year: '2014'
   }
 },
 {
   type: "Feature",
   geometry: {
      type: "Point",
      coordinates:  [ 29.917652,-1.865506 ]
   },
   properties: {
    title: 'Rwanda',
      description: 'Been to the cleanest city in Africa, Kigali',
            year: '2015'
   }
 },
 {
   type: "Feature",
   geometry: {
      type: "Point",
      coordinates:  [ 5.600489,52.21158 ]
   },
   properties: {
    title: 'The Netherlands',
      description: 'Been to Amsterdam Multiple times',
            year: '2014,2015,2016,2017'
   }
 }
]
}
// add markers to map
geojson.features.forEach(function(marker) {

// create a HTML element for each feature
var el = document.createElement('div');
el.className = 'marker';

// make a marker for each feature and add to the map
new mapboxgl.Marker(el)
  .setLngLat(marker.geometry.coordinates)
  .setPopup(new mapboxgl.Popup({ offset: 25 }) // add popups
  .setHTML('<h3>' + marker.properties.title + '</h3><p>' + marker.properties.description + '</p><h4>' + marker.properties.year + '</h4>'))
  .addTo(map);
});
</script>

</body>
</html>